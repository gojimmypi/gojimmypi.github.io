<!-- /_includes/sidebar.html page.layout = {{ page.layout }} -->

<div id="renderTOC"></div>
<div class="widget">
    <!-- categories disabled -->
    <h2 class="title">
        <a href="{{ site.categories_dir | relative_url }}">
            <!-- categories disabled -->
        </a>
    </h2>
</div>
<div class="widget">
    <h2 class="title">
        <a href="{{ site.tags_dir | relative_url }}">Tags</a>
    </h2>
    <ul class="tag-list">
        {%-     assign tag_list = site.tags | sort -%}

        {%-     comment -%} -------------detect min and max size of tag -------------{%- endcomment -%}

        {%-     assign min = site.posts.size -%}
        {%-     assign max = 0 -%}
        {%-     for tag in tag_list -%}
        {%-         assign tag_size = tag | last | size -%}
        {%-         if min > tag_size -%}
        {%-             assign min = tag_size -%}
        {%-         endif -%}
        {%-         if max < tag_size -%}
        {%-             assign max = tag_size -%}
        {%-         endif -%}
        {%-     endfor -%}
        {%-     assign range =  max | minus: min -%}
        {%-     comment -%} ------------- end detect ------------- {%- endcomment -%}

        {%-     for tag in tag_list -%}
        {%-         if range == 0 -%}
        {%-             assign font_size = 100 -%}
        {%-         else -%}
        {%-             comment -%} scale between 71% (1/sqrt(2)) to (71+70)% (sqrt(2)) adjust the 71 and 70 to your need {%- endcomment -%}
        {%-             assign font_size = tag | last | size | minus: min | times: 70 | divided_by: range | plus: 71 -%}
        {%-         endif -%}

        {%-         assign tag_name = tag[0] -%}
        {%-         assign tag_slug = tag_name | slugify -%}
        {%-         assign tag_href = site.tag_dir | append: "/" | append: tag_slug | append: "/" | replace: "//", "/" | relative_url -%}
        <li>
            <a href="{{ tag_href }}" style="font-size: {{ font_size }}%" title="View tags with keyword tag: {{ tag_name }}">
                {{ tag_name }}<sup>{{ tag | last | size }}</sup>
            </a>
        </li>
        {%-     endfor -%}
        {%-     assign tag_list = nil -%}
    </ul>
</div>
<div class="widget">
    <h2 class="title">
        <a href="{{ site.authors_dir | relative_url }}" title="View all authors">Authors</a>
    </h2>
    <ul class="author-list">
        {%- for author in site.data.authors -%}
        <li>
            {%- assign author_path = site.author_dir | append: "/" | append: author.id | append: "/" -%}
            <a href="{{ author_path | relative_url }}" title="View articles by {{ author.name }}">
                {%- if author.name -%}
                    {{ author.name }}
                {%- else -%}
                    {{ author.id }}
                {%- endif -%}
            </a>
        </li>
        {%- endfor -%}
    </ul>
</div>
<div class="widget">
    <h2 class="title">
        <a href="{{ '/archive/' | relative_url }}" title="View the archive">Archive</a>
    </h2>
    <ul class="archive">
        {%- for post in site.posts -%}
        {%- assign post_year = post.date | date: '%Y' -%}
        {%- unless post.next -%}
        <li>
            <a href="{{ '/archive/' | append: post_year | append: '/' | relative_url }}" title="View articles from {{ post_year }}">
                {{ post_year }}
            </a>
        </li>
        {%- else -%}
        {%- assign next_year = post.next.date | date: '%Y' -%}
        {%- if post_year != next_year -%}
        <li>
            <a href="{{ '/archive/' | append: post_year | append: '/' | relative_url }}" title="View articles from {{ post_year }}">
                {{ post_year }}
            </a>
        </li>
        {%- endif -%}
        {%- endunless -%}
        {%- endfor -%}
    </ul>
</div>
