<!-- file: /_includes/head.html -->
{% if (jekyll.environment == "development") %}
<!-- jekyll.environment: development -->
<!-- this page is from [{{ page.path }}] -->
{% else %}
<!-- jekyll.environment: production -->
{% endif %}

<!-- helper to avoid page-load flash -->
<style>
    html, body {
        background: #111111;
    }

        html.theme-preload * {
            transition: none !important;
        }
</style>

<script>
    (function () {
        var key = "theme";
        var saved = null;

        try {
            saved = localStorage.getItem(key);
        } catch (e) {
            saved = null;
        }

        var wantsDark = false;

        if (saved === "dark") {
            wantsDark = true;
        } else if (saved === "light") {
            wantsDark = false;
        } else if (window.matchMedia) {
            wantsDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        }

        var root = document.documentElement;
        root.classList.add("theme-preload");
        root.setAttribute("data-theme", wantsDark ? "dark" : "light");
    })();
</script>
<!-- /helper to avoid page-load flash -->


<meta content="width=device-width, initial-scale=1" name="viewport" />
<!-- meta name="color-scheme" content="dark light" -->
<!-- JS -->
<!-- see https://developer.chrome.com/docs/lighthouse/pwa/themed-omnibox/?utm_source=lighthouse&utm_medium=devtools -->
<meta name="theme-color" content="#333333" />

<script type="text/javascript" src="/js/jquery-2.2.2.min.js"></script>

{% if jekyll.environment != "development" %}
<script type="text/javascript">
</script>
{% endif %}

{% if page.math %}
<script type="text/x-mathjax-config">
    {% include _mathjax-cdn-setup.min.js %}
</script>
{% endif %}

{% if site.usefallback == null or site.usefallback == true %}
<script type="text/javascript">
    {% include _fallback.min.js %}
</script>

<script type="text/javascript">
fallback.load({

    main: "{{ site.baseurl | replace: '//', '/' }}/css/main.css?v={% if site.github.build_revision %}{{ site.github.build_revision }}{% else %}{{ site.time | date: '%s' }}{% endif %}",

    jQuery: [
        {% if jekyll.environment != "development" %}
        "https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js",
        "https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js",
        {% endif %}
        "{{ site.baseurl | replace: '//', '/' }}/js/jquery-2.2.2.min.js"
    ],

    Materialize: [
        {% if jekyll.environment != "development" %}
        "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js",
        {% endif %}
        "{{ site.baseurl | replace: '//', '/' }}/js/materialize.min.js"
    ],

    cssTransitionSupport: [
        {% if site.infinite_scroll == true %}
            {% if site.sidebar_toc == true %}
                "{{ site.baseurl | replace: '//', '/' }}/js/global.infinite.toc.min.js"
            {% else %}
                "{{ site.baseurl | replace: '//', '/' }}/js/global.infinite.min.js"
            {% endif %}
        {% else %}
            {% if site.sidebar_toc == true %}
                "{{ site.baseurl | replace: '//', '/' }}/js/global.toc.min.js"
            {% else %}
                "{{ site.baseurl | replace: '//', '/' }}/js/global.min.js"
            {% endif %}
        {% endif %}
    ]
    {% if page.math %},
    MathJax: [
        {% if jekyll.environment != "development" %}
        "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full",
        {% endif %}
        "{{ site.baseurl | replace: '//', '/' }}/MathJax/MathJax.js?config=TeX-AMS_CHTML-full"
    ]
    {% endif %}

}, {
    shim: {
        "Materialize": ["jQuery"],
        "cssTransitionSupport": ["Materialize"]
    }
});
</script>

{% else %}
<link rel="stylesheet" href="/css/main.css?v={% if site.github.build_revision %}{{ site.github.build_revision }}{% else %}{{ site.time | date: '%s' }}{% endif %}">

<!--script type="text/javascript" src="/js/jquery-2.2.2.min.js"></script moved to above -->

<script type="text/javascript" src="/scripts/jquery.toc.js"></script>
<script type="text/javascript" src="/scripts/infinite/1-jquery.jscroll.js"></script>
<script type="text/javascript" src="/scripts/global/2-imagelightbox.js"></script>
<script type="text/javascript" src="/scripts/global/scripts.js"></script>
<script type="text/javascript" src="/js/materialize.min.js"></script>
<script type="text/javascript" src="/scripts/infinite/init.js?forceversion=2"></script>
{% endif %}

{% if page.sidebar_toc %}
<script type="text/javascript">
    fallback.ready(function () {
        $('#post-content').toc({
            renderIn: '#renderTOC',
            showCollapsed: true,
            minItemsToShowToc: 0
        });
    });
</script>

<!-- CSS -->
<style type="text/css">
    {% capture include_to_scssify %}
        {% include _heading.scss %}
    {% endcapture %}
    {{ include_to_scssify | scssify }}
</style>
{% endif %}

{% if page.amsthm %}
<style type="text/css">
    {% capture include_to_scssify %}
        {% include _amsthm.scss %}
    {% endcapture %}
    {{ include_to_scssify | scssify }}
</style>
{% endif %}

<!-- Google Analytics. Put the ID in _config.yml -->
{% if jekyll.environment != "development" %}
<script type="text/javascript">
</script>
{% endif %}

<!-- Load the user's last selected theme for the lamp -->
<script type="text/javascript">
    {% include _dark_mode.js %}
</script>

<link rel="stylesheet" id="color-change">

<!-- Site Infos -->
{% seo %}
{% include favicon.html %}
