// file: /_sass/partials/components/_codeheader.scss
// Copy button styling for Jekyll code blocks.
// Goals:
// - No full-width bar (header stays transparent).
// - Tight join to the code block below (no extra gap).
// - Rounded "pill" button similar to nav pills.
// - Icon clearly visible in both light/dark.
// ASCII-only (no emoji).

.code-header {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    /* Make the header itself visually disappear */
    background: transparent;
    border: 0;
    /* Tight: remove default spacing */
    margin: 0;
    padding: 0;
    /* Prevent a tall header row */
    line-height: 1;
}

    /* Tight join: kill the usual margin above the code block when preceded by the header */
    .code-header + .highlighter-rouge,
    .code-header + .highlight,
    .code-header + div.highlighter-rouge {
        margin-top: 0;
    }

        /* If your theme adds margin on the <pre>, also remove it in this specific adjacency */
        .code-header + .highlighter-rouge pre,
        .code-header + .highlight pre,
        .code-header + div.highlighter-rouge pre {
            margin-top: 0;
        }

/* The button itself */
.copy-code-button {
    appearance: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    cursor: pointer;
    /* Pill look (matches your nav pill variables) */
    border: 1px solid var(--nav-pill-border);
    background: var(--nav-pill-bg);
    /* IMPORTANT: use link color for contrast */
    color: var(--link);
    border-radius: 6px;
    font-size: 0.75rem;
    line-height: 1;
    padding: 6px 10px;
    /* Tight: minimal separation from code block below */
    margin: 0 0 2px 0;
    transition: background-color 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.05s ease;
}

    .copy-code-button:hover {
        background: var(--nav-hover);
    }

    .copy-code-button:active {
        background: var(--nav-active);
        transform: translateY(1px);
    }

    .copy-code-button:focus-visible {
        outline: 2px solid var(--focus-ring);
        outline-offset: 2px;
    }

    /* Label */
    .copy-code-button::before {
        content: "Copy code";
    }

    /* Clipboard icon (SVG, currentColor, ASCII-only) */
    .copy-code-button::after {
        content: "";
        width: 16px;
        height: 16px;
        display: inline-block;
        flex: 0 0 16px;
        background-repeat: no-repeat;
        background-size: 16px 16px;
        /* Use currentColor for visibility */
        background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2024%2024%27%20fill%3D%27none%27%20stroke%3D%27currentColor%27%20stroke-width%3D%272.25%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%3E%3Crect%20x%3D%279%27%20y%3D%279%27%20width%3D%2713%27%20height%3D%2713%27%20rx%3D%272%27%20ry%3D%272%27/%3E%3Cpath%20d%3D%27M5%2015H4a2%202%200%200%201-2-2V4a2%202%200%200%201%202-2h9a2%202%200%200%201%202%202v1%27/%3E%3C/svg%3E");
    }

    /* Copied state */
    .copy-code-button.copied::before {
        content: "Copied";
    }

    .copy-code-button.copied::after {
        background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2024%2024%27%20fill%3D%27none%27%20stroke%3D%27currentColor%27%20stroke-width%3D%272.25%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%3E%3Cpath%20d%3D%27M20%206%209%2017%204%2012%27/%3E%3C/svg%3E");
    }


/* Optional: slightly boost icon visibility in dark mode */
html[data-theme="dark"] .copy-code-button::after,
html.dark .copy-code-button::after,
body.dark-theme .copy-code-button::after {
    opacity: 0.95;
}

/* Dark mode: boost icon contrast only (do not change layout/colors elsewhere) */
html[data-theme="dark"] .copy-code-button::after,
html.dark .copy-code-button::after,
body.dark-theme .copy-code-button::after,
html[data-theme="dark"] .copy-code-button.copied::after,
html.dark .copy-code-button.copied::after,
body.dark-theme .copy-code-button.copied::after {
    filter: brightness(1.9) contrast(1.4);
    opacity: 1;
}
/* Dark mode: brighter icons only (swap SVG, nothing else) */
html[data-theme="dark"] .copy-code-button::after,
html.dark .copy-code-button::after,
body.dark-theme .copy-code-button::after {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2024%2024%27%20fill%3D%27none%27%20stroke%3D%27%23e7eaf0%27%20stroke-width%3D%272.5%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%3E%3Crect%20x%3D%279%27%20y%3D%279%27%20width%3D%2713%27%20height%3D%2713%27%20rx%3D%272%27%20ry%3D%272%27/%3E%3Cpath%20d%3D%27M5%2015H4a2%202%200%200%201-2-2V4a2%202%200%200%201%202-2h9a2%202%200%200%201%202%202v1%27/%3E%3C/svg%3E");
}

html[data-theme="dark"] .copy-code-button.copied::after,
html.dark .copy-code-button.copied::after,
body.dark-theme .copy-code-button.copied::after {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2024%2024%27%20fill%3D%27none%27%20stroke%3D%27%2322c55e%27%20stroke-width%3D%272.75%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%3E%3Cpath%20d%3D%27M20%206%209%2017%204%2012%27/%3E%3C/svg%3E");
}
