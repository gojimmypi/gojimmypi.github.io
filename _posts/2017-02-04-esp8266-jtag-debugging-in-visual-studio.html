---
layout: post
title: ESP8266 JTAG Debugging in Visual Studio with Olimex ARM-USB-OCD-H and Sysprogs
  VisualGDB
date: '2017-02-04T14:55:00.000-08:00'
author: gojimmypi
tags:
- Olimex
- OpenOCD
- JTAG
- Visual Studio
- ARM-USB-OCD-H
- ESP8266
- GDB
- Mouser
- Debug
- Embedded Debugging
modified_time: '2017-02-04T15:01:47.464-08:00'
thumbnail: https://i.ytimg.com/vi/4Z1MnwWFzmA/0.jpg
blogger_id: tag:blogger.com,1999:blog-4109066286647243251.post-328952149884460560
blogger_orig_url: https://gojimmypi.blogspot.com/2017/02/esp8266-jtag-debugging-in-visual-studio.html
---

To date, my go-to development environment - in Visual Studio 2015, is the <a href="http://www.visualmicro.com/">VisualMicro add-in.</a>
 There's no hardware debugging, but I've found it easy to use and reliable.<br />
<br />However, I've been interested on getting JTAG&nbsp;ESP8266 hardware debugging working in Visual Studio using the 
<a href="https://visualgdb.com/download/">Sysprogs VisualGDB add-in</a>
&nbsp;- with mixed results.<br />
<br />I started with the Altera Bus Blaster than I already had on hand for programming Arduino. (hint: don't bother, it won't work: no reset control - see 
<a href="https://sysprogs.com/w/forums/topic/altera-bus-blaster-to-program-esp8266/">this discussion</a>
&nbsp;)<br />
<br />
There are several tutorials, some not really up to date, but each with interesting information:
<br />
<br />
<a href="https://visualgdb.com/tutorials/esp8266/">
Developing projects for the ESP8266 WiFi chip with Visual Studio - August 24, 2015</a><br />
<a href="https://visualgdb.com/tutorials/esp8266/olimex/">
Debugging ESP8266 firmware with Olimex ARM-USB-OCD-H - September 9, 2015</a><br />
<a href="https://visualgdb.com/tutorials/esp8266/gdbstub/">
Debugging ESP8266 firmware with the UART GDB Stub - October 14, 2015</a><br />
<a href="https://visualgdb.com/tutorials/esp8266/openocd/">
Debugging ESP8266 code with OpenOCD and Visual Studio - November 5, 2015</a><br />
<br />First, just figuring out which JTAG debugging hardware to buy: first I tried the Segger (kudos to them for having a generous discount for people not developing to sell a product). The Sysprogs folks then 
<a href="https://sysprogs.com/w/forums/topic/where-to-find-esp8266-xtensa-lx-106-elf-for-gdb-stub/#post-10205">recommended that I follow the tutorial exactly, by using an Olimex instead</a>. Another week into my 30 day trial and <a href="http://www.mouser.com/_/?Keyword=ARM-USB-OCD-H">Mouser Electronics to the rescue with an ARM-USB-OCD-H debugger</a>
&nbsp;delivered. The price was about the same as the EDU version of the Segger. (approx. $60)<br />
<br />I had 
<a href="https://sysprogs.com/w/forums/topic/where-to-find-esp8266-xtensa-lx-106-elf-for-gdb-stub/">problems even finding the ESP8266 Xtensa-LX 106 elf for GDB stub</a>
&nbsp;(hint, it does not display in the directory shown in tutorial!)&nbsp; <br />
<br />I also had problems with the interesting feature to 
<a href="https://sysprogs.com/w/forums/topic/debug-existing-project-not-created-with-file-new-embedded-project-wizard/">
debug existing project.</a><br />
<br />
In the end I did get the debugging working.
<br />
<br />I have&nbsp;
<a href="https://youtu.be/4Z1MnwWFzmA">this video on Creating Olimex VisualGDB Embedded Project for ESP8266 </a>
:<br />
<br />

<div class="separator" style="clear: both; text-align: center;">
<iframe allowfullscreen="" class="YOUTUBE-iframe-video" data-thumbnail-src="https://i.ytimg.com/vi/4Z1MnwWFzmA/0.jpg" frameborder="0" height="266" src="https://www.youtube.com/embed/4Z1MnwWFzmA?feature=player_embedded" width="320"></iframe>
</div>
<br />and&nbsp;
<a href="https://youtu.be/9Hid7ixEigM">
this video on JTAG Debugging ESP8266 with Olimex and VisualGDB</a><br />
<br />

<div class="separator" style="clear: both; text-align: center;">
<iframe allowfullscreen="" class="YOUTUBE-iframe-video" data-thumbnail-src="https://i.ytimg.com/vi/9Hid7ixEigM/0.jpg" frameborder="0" height="266" src="https://www.youtube.com/embed/9Hid7ixEigM?feature=player_embedded" width="320"></iframe>
</div>
<br />
&nbsp;(they are separate as Windows 10 feature "Windows Key + G" video recording does not record pop-up dialog boxes)
<br />
<br />Here are&nbsp;the pinouts of the 
<a href="https://www.olimex.com/Products/ARM/JTAG/ARM-USB-OCD-H/">Olimex ARM-USB-OCD-H 20-pin JTAG connector</a>&nbsp;and the <a href="https://www.olimex.com/Products/IoT/ESP8266-EVB/open-source-hardware">Olimex ESP8266-EVB</a>
&nbsp;ESP8266 10 pin header:<br />
<br />

<div class="separator" style="clear: both; text-align: center;">
<a href="../images/s1600/OlimexESP8266Jtag.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;">
<img border="0" height="163" src="../images/s320/OlimexESP8266Jtag.png" width="320"></a>
</div>
<br />
Here's also a partial&nbsp;Olimex schematic of interest:
<br />

<div class="separator" style="clear: both; text-align: center;">
<a href="../images/s1600/OlimexJTAGESP8266.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;">
<img border="0" height="157" src="../images/s320/OlimexJTAGESP8266.png" width="320"></a>
</div>
<br />
<br />
My setup looks like this:
<br />
<br />

<div class="separator" style="clear: both; text-align: center;">
<a href="../images/s1600/OlimexESP8266_Debugging.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;">
<img border="0" height="179" src="../images/s320/OlimexESP8266_Debugging.PNG" width="320"></a>
</div>
<br />
<br />
<br />
Now that I have this working with the Olimex version of the ESP8266... on to trying to do this with the NodeMCU version!
<br />
<br />I'll be posting updates&nbsp;on 
<a href="http://twitter.com/gojimmypi">twitter</a> with source code on <a href="https://github.com/gojimmypi">
GitHub.</a><br />

<div class="separator" style="clear: both; text-align: center;">
&nbsp;
</div>

<div class="separator" style="clear: both; text-align: center;">
&nbsp;
</div>

<div class="separator" style="clear: both; text-align: center;">
&nbsp;
</div>

<div align="left" class="separator" style="clear: both; text-align: center;">﻿
</div>

<div class="separator" style="clear: both; text-align: center;">
&nbsp;
</div>

<div align="left" class="separator" style="clear: both; text-align: center;">﻿
</div>
<br />
 Copyright (c) gojimmypi all rights reserved. Blogger Image Move Cleaned: 5/3/2021 1:35:50 PM
<br />

<!--   Copyright (c) gojimmypi all rights reserved.  -->