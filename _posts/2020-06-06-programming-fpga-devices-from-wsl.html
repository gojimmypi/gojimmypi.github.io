---
layout: post
title: Programming FPGA Devices from WSL
date: '2020-06-06T12:36:00.002-07:00'
author: gojimmypi
tags:
- icebreaker
- Visual Studio
- WSL
- FPGA
modified_time: '2021-02-07T18:16:50.767-08:00'
thumbnail: https://1.bp.blogspot.com/-qV4h92r58iM/Xtvq2QLy_CI/AAAAAAAACi8/BpsuEf_IVmIiIqB2jE_YP9K5hubzOeRxQCLcBGAsYHQ/s72-c/zadig_icebreaker.png
blogger_id: tag:blogger.com,1999:blog-4109066286647243251.post-903388309692834983
blogger_orig_url: https://gojimmypi.blogspot.com/2020/06/programming-fpga-devices-from-wsl.html
---

Today I received a DM on Twitter asking for help to program an FPGA (specifically the <a href="https://www.crowdsupply.com/1bitsquared/icebreaker-fpga">1bitsquared iCEBreaker</a>) from <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL</a>. I realized that most of the useful information is buried in my long (and admittedly sometimes rambling) prior blogs. So this is a summary for just that topic.<br /><br />The first thing to do, is plug in your device. In the case of the iCEBreaker, make sure the drivers are set to libusbk using <a href="https://zadig.akeo.ie/">Zadig</a>&nbsp;as noted <a href="https://github.com/esden/WTFpga/blob/master/setup_windows.md">here</a>:     <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-qV4h92r58iM/Xtvq2QLy_CI/AAAAAAAACi8/BpsuEf_IVmIiIqB2jE_YP9K5hubzOeRxQCLcBGAsYHQ/s1600/zadig_icebreaker.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="262" data-original-width="598" height="175" src="https://1.bp.blogspot.com/-qV4h92r58iM/Xtvq2QLy_CI/AAAAAAAACi8/BpsuEf_IVmIiIqB2jE_YP9K5hubzOeRxQCLcBGAsYHQ/s400/zadig_icebreaker.png" width="400" /></a></div><br />Note that native USB drivers are <i>not supported </i>in WSL (well, WSL1, anyhow; I've not been able to install WSL2 just yet)<div><br /></div><div>If after changing the drivers the board is *still* not recognized by iceprog, try unplugging, waiting a few seconds and plugging the iCEBreaker back into the USB port. I've also seen mixed results with hubs, so perhaps try connecting directly if it still does not work.<br /><br />Next, make sure you have the DOS version of the programmer on the Windows filesystem. I have mine in my <code>C:\workspace\ulx3s-toolchain\bin\</code> directory:<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-Acd-5hi3Mys/XtvxNvzOMuI/AAAAAAAACjg/s5QEaM3FWK8S46s9ykQ4X3Ia4ZEwQQ0CQCLcBGAsYHQ/s1600/iceprog-dot-exe_in_dos.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="391" data-original-width="933" height="167" src="https://1.bp.blogspot.com/-Acd-5hi3Mys/XtvxNvzOMuI/AAAAAAAACjg/s5QEaM3FWK8S46s9ykQ4X3Ia4ZEwQQ0CQCLcBGAsYHQ/s400/iceprog-dot-exe_in_dos.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br />The really crazy thing about WSL, is that not only is the Windows file system available in the <code>/mnt/</code> directory such as&nbsp;<code>/mnt/c</code>&nbsp;for <code>c:\</code> ...  but Windows executables can be launched from the WSL prompt as well! And of course there's plenty of native USB driver support in Windows.<br /><br />Here's an example in <code>/mnt/c/users/gojimmypi/source/repos/Verilog12/Verilog12</code>&nbsp;- a WSL directory which is&nbsp;<code>C:\users\gojimmypi\source\repos\Verilog12\Verilog12</code>&nbsp;(created by Visual Studio)<br /><br />Calling the DOS executable to program the iCEBreaker:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-jGPmccEjHEk/XtvtRiR925I/AAAAAAAACjU/C-jfSboxn7ELe2T3u04XFQv84sdwIo15QCLcBGAsYHQ/s1600/call_iceprog_dos_from_wsl.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="239" data-original-width="933" height="101" src="https://1.bp.blogspot.com/-jGPmccEjHEk/XtvtRiR925I/AAAAAAAACjU/C-jfSboxn7ELe2T3u04XFQv84sdwIo15QCLcBGAsYHQ/s400/call_iceprog_dos_from_wsl.png" width="400" /></a></div><br />That's it!<br /><br />Links:<br /><br /><ul><li><a href="https://github.com/FPGAwars/toolchain-icestorm/wiki#testing-iceprog">FPGAwars toolchain-icestorm (includes iceprog.exe)</a></li><li><a href="https://github.com/im-tomu/fomu-toolchain/releases/">fomu toolchain releases (includes iCE40 programmer)</a></li><li><a href="https://github.com/emard/ulx3s-examples/tree/master/bin">emard's ulx3s-examples binaries for the ULX3S ECP5</a></li></ul><br /><br /></div>